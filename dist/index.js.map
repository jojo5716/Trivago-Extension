{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0c14f4f56e45c5cd9f0e","webpack:///./src/index.js","webpack:///./src/scrapping.js"],"names":["detectingURL","setInterval","currentUrl","window","location","hostname","isTrivagoURL","indexOf","isTrivagoSearch","search","length","activateExtension","checkIframeExist","document","getElementById","clearInterval","existIframe","newDiv","createElement","src","chrome","extension","getURL","id","sandbox","container","getElementsByClassName","appendChild","style","width","minHeight","overflow","border","changeBackGroundImage","hotels","doScraping","console","log","storage","local","set","oldContainer","display","mainWrap","backgroundImage","backgroundColor","backgroundSize","backgroundRepeat","backgroundPosition","parentElement","parent","$","find","hotelsJSON","i","hotel","photo","attr","elementName","name","text","trim","category","match","rates","otherPricesElements","otherPrices","bestPrice","j","buttonContent","priceElement","price","remove","push","err","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;ACtCA;;;;;;AAGA,KAAIA,eAAeC,YAAY,YAAU;AACrC,SAAMC,aAAaC,OAAOC,QAAP,CAAgBC,QAAnC;AACA,SAAMC,eAAeJ,WAAWK,OAAX,CAAmB,YAAnB,KAAoC,CAAC,CAA1D;AACA,SAAMC,kBAAkBL,OAAOC,QAAP,CAAgBK,MAAhB,IAA0BN,OAAOC,QAAP,CAAgBK,MAAhB,CAAuBC,MAAvB,GAAgC,CAAlF;;AAEA,SAAIJ,gBAAgBE,eAApB,EAAqC;AACjCG;AACH;AACJ,EARkB,EAQhB,IARgB,CAAnB;;AAWA,UAASC,gBAAT,GAA4B;AACxB,YAAOC,SAASC,cAAT,CAAwB,0BAAxB,KAAuD,IAA9D;AACH;;AAED,UAASH,iBAAT,GAA6B;AACzBI,mBAAcf,YAAd;;AAEA,SAAIgB,cAAcJ,kBAAlB;AACA,SAAI,CAACI,WAAL,EAAkB;AACd,aAAIC,SAASJ,SAASK,aAAT,CAAuB,QAAvB,CAAb;AACAD,gBAAOE,GAAP,GAAaC,OAAOC,SAAP,CAAiBC,MAAjB,CAAwB,gBAAxB,CAAb;AACAL,gBAAOM,EAAP,GAAY,0BAAZ;AACAN,gBAAOO,OAAP,GAAiB,0DAAjB;;AAEA,aAAIC,YAAYZ,SAASa,sBAAT,CAAgC,WAAhC,CAAhB;;AAEA,aAAGD,aAAaA,UAAU,CAAV,CAAhB,EAA+B;AAC3B;AACAA,uBAAU,CAAV,EAAaE,WAAb,CAAyBV,MAAzB;;AAEAA,oBAAOW,KAAP,CAAaC,KAAb,GAAqB,MAArB;AACAZ,oBAAOW,KAAP,CAAaE,SAAb,GAAyB,OAAzB;AACAb,oBAAOW,KAAP,CAAaG,QAAb,GAAwB,QAAxB;AACAd,oBAAOW,KAAP,CAAaI,MAAb,GAAsB,GAAtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAC;AACA,iBAAMC,SAAS,oBAAUC,UAAV,CAAqBhC,OAAOU,QAA5B,CAAf;AACAuB,qBAAQC,GAAR,CAAY,mCAAZ;AACAD,qBAAQC,GAAR,CAAYH,MAAZ;AACAd,oBAAOkB,OAAP,CAAeC,KAAf,CAAqBC,GAArB,CAAyB,EAAC,iBAAiBN,MAAlB,EAAzB,EAAoD,YAAW,CAAE,CAAjE;;AAEA,iBAAIO,eAAe5B,SAASa,sBAAT,CAAgC,eAAhC,CAAnB;AACA,iBAAGe,YAAH,EAAgB;AACZA,8BAAa,CAAb,EAAgBb,KAAhB,CAAsBc,OAAtB,GAAgC,MAAhC;AACH;AAEJ;AACJ;;AAGD,cAAST,qBAAT,GAAiC;AAC7B,aAAIU,WAAW9B,SAASa,sBAAT,CAAgC,WAAhC,EAA6C,CAA7C,CAAf;AACAiB,kBAASf,KAAT,CAAegB,eAAf,GAAiC,qEAAjC;AACAD,kBAASf,KAAT,CAAeiB,eAAf,GAAiC,SAAjC;AACAF,kBAASf,KAAT,CAAekB,cAAf,GAAgC,UAAhC;AACAH,kBAASf,KAAT,CAAemB,gBAAf,GAAiC,WAAjC;AACAJ,kBAASf,KAAT,CAAeoB,kBAAf,GAAmC,aAAnC;AAEH;AAGJ,E;;;;;;;;ACxED,UAASb,UAAT,CAAoBc,aAApB,EAAmC;;AAE/B,SAAIC,SAASC,EAAEF,aAAF,CAAb;AACA,SAAIf,SAASgB,OAAOE,IAAP,CAAY,qBAAZ,CAAb;AACA,SAAIC,aAAa,EAAjB;;AAEA,UAAK,IAAIC,IAAI,CAAb,EAAgBA,KAAKpB,OAAOxB,MAA5B,EAAoC4C,GAApC,EAAyC;AACrC,aAAIC,QAAQJ,EAAEjB,OAAOoB,CAAP,CAAF,CAAZ;;AAEA,aAAG;AACClB,qBAAQC,GAAR,CAAYiB,CAAZ;AACA,iBAAIE,QAAQL,EAAEI,KAAF,EAASH,IAAT,CAAc,0BAAd,EAA0CK,IAA1C,CAA+C,KAA/C,CAAZ;AACA,iBAAIC,cAAcP,EAAEI,KAAF,EAASH,IAAT,CAAc,4BAAd,CAAlB;AACA,iBAAIO,OAAOD,YAAYE,IAAZ,GAAmBC,IAAnB,EAAX;AACAzB,qBAAQC,GAAR,CAAYqB,YAAYD,IAAZ,CAAiB,OAAjB,CAAZ;AACA,iBAAIK,WAAWJ,YAAYD,IAAZ,CAAiB,OAAjB,EAA0BM,KAA1B,CAAgC,KAAhC,EAAuC,CAAvC,CAAf;AACA3B,qBAAQC,GAAR,CAAYc,EAAEI,KAAF,EAASH,IAAT,CAAc,wBAAd,EAAwCK,IAAxC,CAA6C,OAA7C,CAAZ;AACA,iBAAIO,QAAQb,EAAEI,KAAF,EAASH,IAAT,CAAc,wBAAd,EAAwCK,IAAxC,CAA6C,OAA7C,EAAsDM,KAAtD,CAA4D,KAA5D,EAAmE,CAAnE,CAAZ;AACA,iBAAIE,sBAAsBd,EAAEI,KAAF,EAASH,IAAT,CAAc,kCAAd,CAA1B;AACA,iBAAIc,cAAc,EAAlB;AACA,iBAAIC,YAAYhB,EAAEI,KAAF,EAASH,IAAT,CAAc,mBAAd,EAAmCQ,IAAnC,EAAhB;;AAEA,kBAAK,IAAIQ,IAAI,CAAb,EAAgBA,KAAKH,oBAAoBvD,MAAzC,EAAiD0D,GAAjD,EAAsD;AAClD,qBAAIC,gBAAgBlB,EAAEc,oBAAoBG,CAApB,CAAF,EAA0BhB,IAA1B,CAA+B,QAA/B,CAApB;AACA,qBAAIkB,eAAeD,cAAcjB,IAAd,CAAmB,QAAnB,CAAnB;AACA,qBAAImB,QAAQD,aAAaV,IAAb,EAAZ;AACA;AACAU,8BAAaE,MAAb;AACA,qBAAIb,OAAOU,cAAcT,IAAd,EAAX;;AAEAM,6BAAYO,IAAZ,CAAiB;AACbd,+BADa;AAEbY;AAFa,kBAAjB;AAIH;;AAEDlB,wBAAWoB,IAAX,CAAgB;AACZd,2BADY;AAEZH,6BAFY;AAGZM,mCAHY;AAIZE,6BAJY;AAKZE,yCALY;AAMZK,wBAAOJ;AANK,cAAhB;AAQH,UAnCD,CAmCC,OAAOO,GAAP,EAAY;AACTtC,qBAAQC,GAAR,CAAYqC,GAAZ;AACAtC,qBAAQC,GAAR,CAAYiB,CAAZ;AACAlB,qBAAQC,GAAR,CAAY,6BAAZ;AACH;AAEJ;;AAED,YAAOgB,UAAP;AACH;;AAEDsB,QAAOC,OAAP,GAAiB;AACbzC;AADa,EAAjB,C","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Trivago\"] = factory();\n\telse\n\t\troot[\"Trivago\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0c14f4f56e45c5cd9f0e\n **/","import  Scrapping  from './scrapping';\n\n\nvar detectingURL = setInterval(function(){\n    const currentUrl = window.location.hostname;\n    const isTrivagoURL = currentUrl.indexOf('trivago.es') != -1;\n    const isTrivagoSearch = window.location.search && window.location.search.length > 0;\n\n    if (isTrivagoURL && isTrivagoSearch) {\n        activateExtension();\n    }\n}, 3000);\n\n\nfunction checkIframeExist() {\n    return document.getElementById('iframe-trivago-extension') != null;\n}\n\nfunction activateExtension() {\n    clearInterval(detectingURL);\n\n    let existIframe = checkIframeExist();\n    if (!existIframe) {\n        var newDiv = document.createElement('iframe');\n        newDiv.src = chrome.extension.getURL('src/index.html');\n        newDiv.id = 'iframe-trivago-extension';\n        newDiv.sandbox = \"allow-same-origin allow-scripts allow-popups allow-forms\";\n        \n        var container = document.getElementsByClassName('main-wrap');\n\n        if(container && container[0] ) {\n            //container.textContent = '';\n            container[0].appendChild(newDiv);\n\n            newDiv.style.width = '100%';\n            newDiv.style.minHeight = '600px';\n            newDiv.style.overflow = 'hidden';\n            newDiv.style.border = '0';\n            // newDiv.onload = () => {\n            //     console.log(\"---------\");\n            //     console.log(window.document);\n            //     const logo = window.document.getElementsByClassName('siteheader__logo-link')[0];\n            //     localStorage.setItem('trivago', logo.getAttribute('href'));\n            //\n            // };\n\n            changeBackGroundImage();\n            const hotels = Scrapping.doScraping(window.document);\n            console.log(\"-----------------------------2222\");\n            console.log(hotels);\n            chrome.storage.local.set({'TrivagoHotels': hotels}, function() {});\n\n            var oldContainer = document.getElementsByClassName('centerwrapper');\n            if(oldContainer){\n                oldContainer[0].style.display = 'none';\n            }\n\n        }\n    }\n\n\n    function changeBackGroundImage() {\n        var mainWrap = document.getElementsByClassName('main-wrap')[0];\n        mainWrap.style.backgroundImage = \"url('http://a.dilcdn.com/sw/background/bg_starsL-d39a0dc14ce4.jpg')\";\n        mainWrap.style.backgroundColor = '#151515';\n        mainWrap.style.backgroundSize = '40% 100%';\n        mainWrap.style.backgroundRepeat= 'no-repeat';\n        mainWrap.style.backgroundPosition= '-64px -57px';\n\n    }\n\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","function doScraping(parentElement) {\n\n    var parent = $(parentElement);\n    var hotels = parent.find('.hotellist li.hotel');\n    var hotelsJSON = [];\n\n    for (var i = 0; i <= hotels.length; i++) {\n        var hotel = $(hotels[i]);\n\n        try{\n            console.log(i);\n            var photo = $(hotel).find('.item__image-wrapper img').attr('src');\n            var elementName = $(hotel).find('.item__details .item__name');\n            var name = elementName.text().trim();\n            console.log(elementName.attr('class'));\n            var category = elementName.attr('class').match(/\\d/g)[1];\n            console.log($(hotel).find('.item__review .icon-ic').attr('class'));\n            var rates = $(hotel).find('.item__review .icon-ic').attr('class').match(/\\d/g)[1];\n            var otherPricesElements = $(hotel).find('.deal-other__top-alternatives li');\n            var otherPrices = [];\n            var bestPrice = $(hotel).find('.item__best-price').text();\n\n            for (var j = 0; j <= otherPricesElements.length; j++) {\n                var buttonContent = $(otherPricesElements[j]).find('button');\n                var priceElement = buttonContent.find('strong');\n                var price = priceElement.text();\n                // Remove element to get later only the name\n                priceElement.remove();\n                var name = buttonContent.text();\n\n                otherPrices.push({\n                    name,\n                    price\n                });\n            }\n\n            hotelsJSON.push({\n                name,\n                photo,\n                category,\n                rates,\n                otherPrices,\n                price: bestPrice\n            });\n        }catch (err) {\n            console.log(err);\n            console.log(i);\n            console.log(\"???????????????????????????\");\n        }\n\n    }\n\n    return hotelsJSON;\n}\n\nmodule.exports = {\n    doScraping\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scrapping.js\n **/"],"sourceRoot":""}