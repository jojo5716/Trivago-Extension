{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a0bdba9aa39c9807f689","webpack:///./src/index.js","webpack:///./src/scrapping.js"],"names":["detectingURL","setInterval","currentUrl","window","location","hostname","isTrivagoURL","indexOf","isTrivagoSearch","search","length","activateExtension","checkIframeExist","document","getElementById","clearInterval","existIframe","newDiv","createElement","src","chrome","extension","getURL","id","sandbox","container","getElementsByClassName","appendChild","style","width","minHeight","overflow","border","changeBackGroundImage","hotels","doScraping","storage","local","set","oldContainer","display","mainWrap","backgroundImage","backgroundColor","backgroundSize","backgroundRepeat","backgroundPosition","parentElement","CHARACTER","parent","$","find","hotelsJSON","i","hotel","photo","attr","elementName","name","text","trim","category","match","rates","otherPricesElements","otherPrices","bestPrice","coordenatesElement","longitude","data","latitude","j","buttonContent","priceElement","price","remove","nameOtherPrice","push","Array","parseInt","rateInt","err","module","exports"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Trivago\"] = factory();\n\telse\n\t\troot[\"Trivago\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a0bdba9aa39c9807f689\n **/","import  Scrapping  from './scrapping';\n\n\nvar detectingURL = setInterval(function(){\n    const currentUrl = window.location.hostname;\n    const isTrivagoURL = currentUrl.indexOf('trivago.es') != -1;\n    const isTrivagoSearch = window.location.search && window.location.search.length > 0;\n\n    if (isTrivagoURL && isTrivagoSearch) {\n        activateExtension();\n    }\n}, 3000);\n\n\nfunction checkIframeExist() {\n    return document.getElementById('iframe-trivago-extension') != null;\n}\n\nfunction activateExtension() {\n    clearInterval(detectingURL);\n\n    let existIframe = checkIframeExist();\n    if (!existIframe) {\n        var newDiv = document.createElement('iframe');\n        newDiv.src = chrome.extension.getURL('src/index.html');\n        newDiv.id = 'iframe-trivago-extension';\n        newDiv.sandbox = \"allow-same-origin allow-scripts allow-popups allow-forms\";\n        \n        var container = document.getElementsByClassName('main-wrap');\n\n        if(container && container[0] ) {\n            container[0].appendChild(newDiv);\n\n            newDiv.style.width = '100%';\n            newDiv.style.minHeight = '600px';\n            newDiv.style.overflow = 'hidden';\n            newDiv.style.border = '0';\n\n            changeBackGroundImage();\n            const hotels = Scrapping.doScraping(window.document);\n            chrome.storage.local.set({'TrivagoHotels': hotels}, function() {});\n\n            var oldContainer = document.getElementsByClassName('centerwrapper');\n            if(oldContainer){\n                oldContainer[0].style.display = 'none';\n            }\n\n        }\n    }\n\n\n    function changeBackGroundImage() {\n        var mainWrap = document.getElementsByClassName('main-wrap')[0];\n        mainWrap.style.backgroundImage = \"url('http://a.dilcdn.com/sw/background/bg_starsL-d39a0dc14ce4.jpg')\";\n        mainWrap.style.backgroundColor = '#151515';\n        mainWrap.style.backgroundSize = '40% 100%';\n        mainWrap.style.backgroundRepeat= 'no-repeat';\n        mainWrap.style.backgroundPosition= '-64px -57px';\n\n    }\n\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","function doScraping(parentElement) {\n\n    const CHARACTER = {\n        '5': 'darkvader',\n        '4': 'r2d2',\n        '3': 'pilot',\n        '2': 'c3po',\n        '1': 'kylo'\n    };\n\n    var parent = $(parentElement);\n    var hotels = parent.find('.hotellist li.hotel');\n    var hotelsJSON = [];\n\n    for (var i = 0; i <= hotels.length; i++) {\n        var hotel = $(hotels[i]);\n\n        try{\n            var photo = $(hotel).find('.item__image-wrapper img').attr('src');\n\n            if (photo.indexOf('http://') === -1){\n                photo = `http://${photo}`;\n            }\n            \n            var elementName = $(hotel).find('.item__details .item__name');\n            var name = elementName.text().trim();\n            var category = elementName.attr('class').match(/\\d/g)[1];\n            var rates = $(hotel).find('.item__review .icon-ic').attr('class').match(/\\d/g)[1];\n            var otherPricesElements = $(hotel).find('.deal-other__top-alternatives li');\n            var otherPrices = [];\n            var bestPrice = $(hotel).find('.item__best-price').text();\n            var coordenatesElement = $(hotel).find('.slideout_content_container');\n            var longitude = coordenatesElement.data('lng');\n            var latitude = coordenatesElement.data('lat');\n\n            for (var j = 0; j <= otherPricesElements.length; j++) {\n                var buttonContent = $(otherPricesElements[j]).find('button');\n                var priceElement = buttonContent.find('strong');\n                var price = priceElement.text();\n                // Remove element to get later only the name\n                priceElement.remove();\n                var nameOtherPrice = buttonContent.text();\n\n                otherPrices.push({\n                    name: nameOtherPrice,\n                    price\n                });\n            }\n\n            hotelsJSON.push({\n                name,\n                photo,\n                category: new Array(parseInt(category, 10)),\n                rates: CHARACTER[rates],\n                rateInt: rates,\n                otherPrices,\n                price: bestPrice,\n                longitude,\n                latitude\n            });\n        } catch (err) {}\n    }\n\n    return hotelsJSON;\n}\n\n\nmodule.exports = {\n    doScraping\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scrapping.js\n **/"],"sourceRoot":""}